// Use a list in a node to create a list of named template nodes

MY_TEMPLATES
{
  TEMPLIST // list to process
  {
    id = crewReport
    id = temperatureScan
  }
}

// Do processing
@MY_TEMPLATES:HAS[@TEMPLIST:HAS[#id[*]]]:FOR[ZZZZZZZZZ_Templating]
{
  // create a new node inside templates based on first item in TEMPLIST
	EXPERIMENT_TEMPLATE
	{
		name = Experiment
		experiment_id = #$../TEMPLIST/id$ // copy first experiment id
	}

	@TEMPLIST
	{ // delete first id from list
		!id,0 = delete
	}

	MM_PATCH_LOOP {} // check to see if more items to process
}

@MY_TEMPLATES:LAST[ZZZZZZZZZ_Templating]
{
  !TEMPLIST {} // remove temp list after processing completes
}

// Output
// MY_TEMPLATES {
//   EXPERIMENT_TEMPLATE
//   {
//     name = Experiment
//     experiment_id = crewReport
//   }
//   EXPERIMENT_TEMPLATE
//   {
//     name = Experiment
//     experiment_id = temperatureScan
//   }
// }
